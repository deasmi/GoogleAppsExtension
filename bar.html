<!DOCTYPE html>
<html>
<head>
<title>Google Apps Bar</title>
<link rel="stylesheet" type="text/css" href="barstyle.css">
<script>


var applicationNames=["Mail","Calender","Docs","Manage"]
var applicationURLs=["http://mail.google.com/a/-domain-/","http://www.google.com/calendar/hosted/-domain-","http://docs.google.com/a/-domain-","http://www.google.com/a/-domain-"]

function renderBar()
{
	var domainList = safari.extension.settings.getItem("domainList").split(',');
	
	// remove, if exists
    var listDiv = document.getElementById('googleAppsList');
	var newList = "";
	for (var i=0; i<domainList.length; i++){
		if (i!=0) newList = newList + "&nbsp;|&nbsp;&nbsp;"
		newList = newList + "<em>" + domainList[i] + "</em>&nbsp;";
		for (var j=0; j<applicationNames.length; j++){
			var url = applicationURLs[j].replace(/-domain-/,domainList[i]);
			newList = newList + "<a href=\"" + url + "\">" + applicationNames[j] + "</a>";
		}
	}



	listDiv.innerHTML=newList;
}


 




</script>
</head>
<body id="bar" onload="renderBar();">
<div id="googleAppsList"></div>
<p>Ha ha ha</p>
</body>
</html>